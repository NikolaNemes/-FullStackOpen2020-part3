(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),a=n.n(r),o=n(15),u=n.n(o),i=n(6),s=n(3),l=n(4),d=n.n(l),j="/api/persons",b={getAll:function(){return d.a.get(j).then((function(e){return e.data}))},create:function(e){return d.a.post(j,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(j,"/").concat(e))},update:function(e,t){return d.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))}},f=function(e){var t=e.persons,n=e.deleteHandler;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)(m,{person:e,deleteHandler:n},e.name)}))})},m=function(e){var t=e.person,n=e.deleteHandler;return Object(c.jsxs)("div",{children:[t.name," ",t.number," ",Object(c.jsx)("button",{onClick:function(){n(t)},children:"delete"})]})},O=function(e){var t=e.addPerson,n=e.newName,r=e.setNewName,a=e.newNumber,o=e.setNewNumber;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:function(e){r(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:a,onChange:function(e){o(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.filter,n=e.setFilter;return Object(c.jsx)("div",{children:Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})})},v=function(e){var t=e.message;return null===t?null:Object(c.jsx)("div",{className:"notification ".concat(t.error?"error":"success"),children:t.text})},x=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),l=u[0],d=u[1],j=Object(r.useState)(""),m=Object(s.a)(j,2),x=m[0],p=m[1],w=Object(r.useState)(""),g=Object(s.a)(w,2),N=g[0],y=g[1],S=Object(r.useState)(null),k=Object(s.a)(S,2),C=k[0],P=k[1];Object(r.useEffect)((function(){b.getAll().then((function(e){return a(e)}))}),[]);var H=n.filter((function(e){return e.name.toLocaleLowerCase().includes(N.toLocaleLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:C}),Object(c.jsx)(h,{filter:N,setFilter:y}),Object(c.jsx)("h2",{children:"Add new"}),Object(c.jsx)(O,{addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===l}));if(t){var c=t;c.number=x,b.update(t.id,Object(i.a)(Object(i.a)({},t),{},{number:x})).then((function(e){a(n.map((function(t){return t.id!==e.id?t:e}))),p(""),d(""),P({text:"Person '".concat(e.name,"' successfully updated!"),error:!1}),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P({text:"Person '".concat(c.name,"' was already removed from server"),error:!0}),setTimeout((function(){P(null)}),5e3)}))}else b.create({name:l,number:x}).then((function(e){a(n.concat(e)),d(""),p(""),P({text:"Person '".concat(e.name,"' successfully added!"),error:!1}),setTimeout((function(){P(null)}),5e3)}))},newName:l,setNewName:d,newNumber:x,setNewNumber:p}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(f,{persons:H,deleteHandler:function(e){window.confirm("Do you really want to delete ".concat(e.name,"?"))&&b.remove(e.id).then((function(t){console.log(t),a(n.filter((function(t){return t.id!==e.id})))})).catch((function(t){alert("Failed in deleting: ".concat(e.name))}))}})]})};n(38);u.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a9add90c.chunk.js.map