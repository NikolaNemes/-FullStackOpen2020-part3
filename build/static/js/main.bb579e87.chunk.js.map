{"version":3,"sources":["services/persons.js","components/persons.js","App.js","index.js"],"names":["baseUrl","noteService","getAll","axios","get","then","response","data","create","person","post","remove","id","delete","update","newPerson","put","Persons","persons","deleteHandler","map","name","Person","number","onClick","PersonForm","addPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","value","onChange","event","target","type","Filter","filter","setFilter","Notification","message","className","error","text","App","useState","setPersons","setMessage","useEffect","personService","returnedPersons","displayMessage","toDisplay","isError","setTimeout","toShow","toLocaleLowerCase","includes","preventDefault","foundPerson","find","catch","concat","console","log","toDelete","window","confirm","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bb579e87.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    return axios.post(baseUrl, person).then(response => response.data);\r\n}\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`);\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst noteService = {getAll, create, remove, update};\r\nexport default noteService;","import React from 'react'\r\n\r\n\r\nconst Persons = ({persons, deleteHandler}) => <div>{persons.map(person => <Person person={person} key={person.name} deleteHandler={deleteHandler}/>)}</div>\r\n\r\nconst Person = ({person, deleteHandler}) => {\r\n  return(<div>{person.name} {person.number} <button onClick={() => {deleteHandler(person)}}>delete</button></div>)\r\n}\r\n\r\nconst PersonForm = ({addPerson, newName, setNewName, newNumber, setNewNumber}) => {\r\n    return(\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={(event) => {setNewName(event.target.value)}}/>\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={(event) => {setNewNumber(event.target.value)}}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\n\r\nexport {Persons, PersonForm};","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport {PersonForm, Persons} from './components/persons'\n\n\nconst Filter = ({filter, setFilter}) => <div><input value={filter} onChange={(event) => {setFilter(event.target.value)}}/></div>\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={`notification ${message.error ? 'error' : 'success'}`}>\n      {message.text}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {personService.getAll().then(returnedPersons => setPersons(returnedPersons));}, []);\n\n  const displayMessage = (toDisplay, isError) => {\n    setMessage(\n      {\n      text: toDisplay,\n      error: isError\n    })\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const foundPerson = persons.find((person) => person.name === newName);\n    if (!foundPerson) {\n      personService.create({name: newName, number: newNumber})\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson));\n          setNewName('');\n          setNewNumber('');\n          displayMessage(`Person '${newPerson.name}' successfully added!`, false);\n        })\n        .catch(error => {\n          if (error.response?.data?.error) {\n            displayMessage(error.response.data.error, true);\n          } else {\n            console.log(error);\n          }\n        })\n    } else {\n      const newPerson = foundPerson;\n      newPerson.number = newNumber;\n      personService.update(foundPerson.id, {...foundPerson, number: newNumber})\n        .then(newPerson => {\n          setPersons(persons.map(person => person.id !== newPerson.id ? person : newPerson));\n          setNewNumber('');\n          setNewName('');\n          displayMessage(`Person '${newPerson.name}' successfully updated!`, false);\n        })\n        .catch(error => {\n          if (error.response?.data?.error) {\n            displayMessage(error.response.data.error, true);\n          } else {\n            displayMessage(`Person '${newPerson.name}' was already removed from server`, true);\n          }\n        })\n    }\n  }\n\n  const removePerson = (toDelete) => {\n    if (!window.confirm(`Do you really want to delete ${toDelete.name}?`)) {\n      return;\n    }\n    personService.remove(toDelete.id)\n      .then(response => {\n        console.log(response);\n        setPersons(persons.filter(person => person.id !== toDelete.id));\n      })\n      .catch(error => {\n        alert(`Failed in deleting: ${toDelete.name}`)\n      });\n  }\n\n  const toShow = persons.filter(person => person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase()));\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter filter={filter} setFilter={setFilter}/>\n      <h2>Add new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber}/>\n      <h2>Numbers</h2>\n      <Persons persons={toShow} deleteHandler={removePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}